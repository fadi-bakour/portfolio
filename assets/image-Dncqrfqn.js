import{r as b,g as N,f as v,j as k,h as S,b as j}from"./index-BZBhPCvI.js";function w(c){const{loading:e,src:o,srcSet:s,onLoad:r,onError:t,crossOrigin:i,sizes:d,ignoreFallback:u}=c,[l,f]=b.useState("pending");b.useEffect(()=>{f(o?"loading":"pending")},[o]);const n=b.useRef(null),h=b.useCallback(()=>{if(!o)return;g();const a=new Image;a.src=o,i&&(a.crossOrigin=i),s&&(a.srcset=s),d&&(a.sizes=d),e&&(a.loading=e),a.onload=m=>{g(),f("loaded"),r==null||r(m)},a.onerror=m=>{g(),f("failed"),t==null||t(m)},n.current=a},[o,i,s,d,r,t,e]),g=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return N(()=>{if(!u)return l==="loading"&&h(),()=>{g()}},[l,h,u]),u?"loaded":l}const O=(c,e)=>c!=="loaded"&&e==="beforeLoadOrError"||c==="failed"&&e==="onError",I=v(function(e,o){const{htmlWidth:s,htmlHeight:r,alt:t,...i}=e;return k.jsx("img",{width:s,height:r,ref:o,alt:t,...i})});I.displayName="NativeImage";const y=v(function(e,o){const{fallbackSrc:s,fallback:r,src:t,srcSet:i,align:d,fit:u,loading:l,ignoreFallback:f,crossOrigin:n,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:g,...a}=e,m=s!==void 0||r!==void 0,p=l!=null||f||!m,x=w({...e,crossOrigin:n,ignoreFallback:p}),E=O(x,h),F={ref:o,objectFit:u,objectPosition:d,...p?a:S(a,["onError","onLoad"])};return E?r||k.jsx(j.img,{as:I,className:"chakra-image__placeholder",src:s,...F}):k.jsx(j.img,{as:I,src:t,srcSet:i,crossOrigin:n,loading:l,referrerPolicy:g,className:"chakra-image",...F})});y.displayName="Image";export{y as I};
